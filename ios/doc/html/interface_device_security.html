<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>MVIDDeciveConnector: DeviceSecurity Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MVIDDeciveConnector
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('interface_device_security.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_device_security-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DeviceSecurity Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#import &lt;<a class="el" href="_device_security_8h_source.html">DeviceSecurity.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for DeviceSecurity:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_device_security.png" usemap="#DeviceSecurity_map" alt=""/>
  <map id="DeviceSecurity_map" name="DeviceSecurity_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:a91af6c4bbe80e3c97b5ebf460f96bed4"><td class="memItemLeft" align="right" valign="top">(int)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_device_security.html#a91af6c4bbe80e3c97b5ebf460f96bed4">registerDevice:</a></td></tr>
<tr class="separator:a91af6c4bbe80e3c97b5ebf460f96bed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a195c84787c69210f0b76f791dd22d5b8"><td class="memItemLeft" align="right" valign="top">(int)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_device_security.html#a195c84787c69210f0b76f791dd22d5b8">applicationLogin:</a></td></tr>
<tr class="separator:a195c84787c69210f0b76f791dd22d5b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59d9ba26ad151f17c38a4942cbde2381"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_device_security.html#a59d9ba26ad151f17c38a4942cbde2381">doLogin:parentViewController:altSubView:</a></td></tr>
<tr class="separator:a59d9ba26ad151f17c38a4942cbde2381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db4f36507e9daa34755e3371c496f17"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_device_security.html#a0db4f36507e9daa34755e3371c496f17">doLogin:parentViewController:</a></td></tr>
<tr class="separator:a0db4f36507e9daa34755e3371c496f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5585e02a0d79a1cbb095aba166bca179"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_device_security.html#a5585e02a0d79a1cbb095aba166bca179">setLoginCenterDisplacement:</a></td></tr>
<tr class="separator:a5585e02a0d79a1cbb095aba166bca179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2fbfbb70427f27362d65c3d76e5d37d"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_device_security.html#ad2fbfbb70427f27362d65c3d76e5d37d">excludeLoginGroup:</a></td></tr>
<tr class="separator:ad2fbfbb70427f27362d65c3d76e5d37d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe74e76d8275892e7e2e4b32640ff16c"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_device_security.html#abe74e76d8275892e7e2e4b32640ff16c">includeAllLoginGroups</a></td></tr>
<tr class="separator:abe74e76d8275892e7e2e4b32640ff16c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44244e1af23d45fddc88bf3ecf56ccef"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_device_security.html#a44244e1af23d45fddc88bf3ecf56ccef">releaseDeviceRegistration</a></td></tr>
<tr class="separator:a44244e1af23d45fddc88bf3ecf56ccef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d2a2cb88c5ff1522e0a0a9b26cba33c"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_device_security.html#a1d2a2cb88c5ff1522e0a0a9b26cba33c">releaseApplicationUsage:</a></td></tr>
<tr class="separator:a1d2a2cb88c5ff1522e0a0a9b26cba33c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a8daf382c58870e969c70b1a257cbed82"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82">ServiceResult</a> { <br/>
&#160;&#160;<a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82a1f63f7246ff87307b7b4476fc8af9d01">Success</a> = 1, 
<a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82a06e6cb5e9544878ee1359a131f8dd5d6">InvalidMVSessionID</a> = 2, 
<a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82a0cd3b6026f2ae9c070283ebb8b879e12">AccessDenied</a> = 4, 
<a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82afe220c677ce46739be269601a35a3f55">ApplicationBorrowTimeExpired</a> = 8, 
<br/>
&#160;&#160;<a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82acd521f386dbb586a9b0dc64993e4697b">DeviceBorrowTimeExpired</a> = 16, 
<a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82afa277401a031d80c5f715e9fde8423f2">ServiceFault</a> = 32, 
<a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82ad9ca97bd0e0d9a08e02d9cbabf79f5a6">ServiceSuccess</a> = 64, 
<a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82a3988e5dfc5afac44615fbeaaf72bda83">NetworkError</a> = 128
<br/>
 }</td></tr>
<tr class="separator:a8daf382c58870e969c70b1a257cbed82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aad6950d6b15f6fe699f5ea163f98b928"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad6950d6b15f6fe699f5ea163f98b928"></a>
LoginViewController *&#160;</td><td class="memItemRight" valign="bottom"><b>login_vc</b></td></tr>
<tr class="separator:aad6950d6b15f6fe699f5ea163f98b928"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a2eaae2e90816d0b5b838a242da9868bf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2eaae2e90816d0b5b838a242da9868bf"></a>
NSString *&#160;</td><td class="memItemRight" valign="bottom"><b>mv_session_id</b></td></tr>
<tr class="separator:a2eaae2e90816d0b5b838a242da9868bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab90a1f8b5daf53715d0f5d782d6bd9a8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab90a1f8b5daf53715d0f5d782d6bd9a8"></a>
NSString *&#160;</td><td class="memItemRight" valign="bottom"><b>access_identifier</b></td></tr>
<tr class="separator:ab90a1f8b5daf53715d0f5d782d6bd9a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a086b65f0eb6ef23618fae3d4185c786c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a086b65f0eb6ef23618fae3d4185c786c"></a>
NSString *&#160;</td><td class="memItemRight" valign="bottom"><b>device_hash</b></td></tr>
<tr class="separator:a086b65f0eb6ef23618fae3d4185c786c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71bfc673061ff1272196f7210656d033"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a71bfc673061ff1272196f7210656d033"></a>
NSNumber *&#160;</td><td class="memItemRight" valign="bottom"><b>device_borrow_time</b></td></tr>
<tr class="separator:a71bfc673061ff1272196f7210656d033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad21d8ef553cc2fe30729065601688420"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad21d8ef553cc2fe30729065601688420"></a>
NSError *&#160;</td><td class="memItemRight" valign="bottom"><b>network_error</b></td></tr>
<tr class="separator:ad21d8ef553cc2fe30729065601688420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c0aa7081a48600b16be97ddcff17776"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c0aa7081a48600b16be97ddcff17776"></a>
NSString *&#160;</td><td class="memItemRight" valign="bottom"><b>service_res_msg</b></td></tr>
<tr class="separator:a1c0aa7081a48600b16be97ddcff17776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8781cb7d6d99a5ed316d57e836390df9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8781cb7d6d99a5ed316d57e836390df9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>service_res_code</b></td></tr>
<tr class="separator:a8781cb7d6d99a5ed316d57e836390df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="interface_device_security.html">DeviceSecurity</a> is the client side interface towards the corresponding MVID seb service <a href="https://signon.mv-nordic.com/device-security/DeviceSecurity">DeviceSecurity</a>. It is designed for easy integration into existing iOS apps. Once the interface is properly integrated into an app it will provide:</p>
<ul>
<li>MVID User authentication</li>
<li>Product access services</li>
<li>MVID Session ID for further requesting into MVID's web services: <a href="https://mvid-services.mv-nordic.com/v2">MVID Services</a></li>
</ul>
<h1><a class="anchor" id="usage"></a>
Usage</h1>
<p>The primary method of <a class="el" href="interface_device_security.html">DeviceSecurity</a> is the <a class="el" href="interface_device_security.html#a59d9ba26ad151f17c38a4942cbde2381">doLogin:</a> method. In a normal integration this method should be all that is needed.</p>
<p>The basic integration has 3 steps:</p>
<ul>
<li>Instantiate <a class="el" href="interface_device_security.html">DeviceSecurity</a> as a member of the class responsible for the login process.</li>
<li>Add a notification observer to listen for the final asynchronious login response "MVIDLoginResponseReady"</li>
<li>Call <a class="el" href="interface_device_security.html#a59d9ba26ad151f17c38a4942cbde2381">doLogin:</a></li>
</ul>
<h2><a class="anchor" id="MVIDLoginResponseReady"></a>
MVIDLoginResponseReady notification object</h2>
<p>The MVIDLoginResponseReady notification is posted via the default notification center with a NSObject as userInfo (user data). The posted userInfo defines the following attributes:</p>
<table class="doxtable">
<tr>
<th>First Header </th><th>Second Header </th><th>Description  </th></tr>
<tr>
<td>NSNumber </td><td>service_result </td><td>Bitwise combination of ServiceResult flags </td></tr>
<tr>
<td>NSNumber </td><td>has_access </td><td>1 if the access_identifier is granted 0 if not </td></tr>
<tr>
<td>NSNumber </td><td>service_res_code </td><td>The server side result code </td></tr>
<tr>
<td>NSString </td><td>service_res_msg </td><td>The server side result message </td></tr>
</table>
<h2><a class="anchor" id="example"></a>
Coding example</h2>
<p>The following is a ver simple example of how a UIViewController with MVID Login responsibility could be coded.</p>
<p>AppLoginViewController.h: </p>
<div class="fragment"><div class="line"><span class="comment">// Very basic header</span></div>
<div class="line"><span class="preprocessor">#import &lt;UIKit/UIKit.h&gt;</span></div>
<div class="line"><span class="keyword">@class</span> <a class="code" href="interface_device_security.html">DeviceSecurity</a>;</div>
<div class="line"><span class="keyword">@interface </span>AppLoginViewController : UIViewController {</div>
<div class="line">    <a class="code" href="interface_device_security.html">DeviceSecurity</a> *device_security;</div>
<div class="line">    NSString *cur_mv_session_id;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">@property</span>(copy) NSString *cur_mv_session_id;</div>
<div class="line"></div>
<div class="line"><span class="keyword">@end</span></div>
</div><!-- fragment --><p>AppLoginViewController.mm: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#import &quot;AppLoginViewController.h&quot;</span></div>
<div class="line"><span class="preprocessor">#import &quot;DeviceSecurity.h&quot;</span></div>
<div class="line"><span class="keyword">@interface </span>AppLoginViewController ()</div>
<div class="line"><span class="keyword">@end</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">@implementation </span>AppLoginViewController</div>
<div class="line"></div>
<div class="line"><span class="keyword">@synthesize</span> cur_mv_session_id = _cur_mv_session_id;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">// Initializing MVID DeviceSecurity</span></div>
<div class="line">- (void)viewDidLoad</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Custom initialization</span></div>
<div class="line">    device_security = [[<a class="code" href="interface_device_security.html">DeviceSecurity</a> alloc] init];</div>
<div class="line">    <span class="comment">// Some pre-configurations (only want school logins)</span></div>
<div class="line">    [device_security excludeLoginGroup:@&quot;private&quot;];</div>
<div class="line">    [device_security excludeLoginGroup:@&quot;company&quot;];</div>
<div class="line">    <span class="comment">// Start observing notifications named &quot;MVIDLoginResponseReady&quot;</span></div>
<div class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loginResponse:) name:@&quot;MVIDLoginResponseReady&quot; object:nil];</div>
<div class="line">    [<span class="keyword">super</span> viewDidLoad];</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">// Notification callback method</span></div>
<div class="line">- (void) loginResponse:(NSNotification *) notification {</div>
<div class="line">    <span class="comment">// Extract interesting notification values</span></div>
<div class="line">    <span class="keywordtype">int</span> service_result = [[notification.userInfo valueForKey:@&quot;service_result&quot;] intValue];</div>
<div class="line">    BOOL has_access = [[notification.userInfo valueForKey:@&quot;has_access&quot;] boolValue];</div>
<div class="line">    <span class="keywordtype">int</span> service_res_code = [[notification.userInfo valueForKey:@&quot;service_res_code&quot;] intValue];</div>
<div class="line">    NSString *service_res_msg = [notification.userInfo valueForKey:@&quot;service_res_msg&quot;];</div>
<div class="line">    <span class="comment">// copy MVID Session ID into a class local property.</span></div>
<div class="line">    cur_mv_session_id = device_security.mv_session_id;</div>
<div class="line">    <span class="comment">// Just log some results</span></div>
<div class="line">    NSLog(<span class="stringliteral">@&quot;service_res_code: %d&quot;</span>, service_res_code);</div>
<div class="line">    NSLog(<span class="stringliteral">@&quot;service_res_msg: %@&quot;</span>, service_res_msg);</div>
<div class="line">    NSLog(<span class="stringliteral">@&quot;mv_session_id: %@&quot;</span>, cur_mv_session_id);</div>
<div class="line">    NSLog(<span class="stringliteral">@&quot;Access granted: %d&quot;</span>, has_access);</div>
<div class="line">    NSLog(<span class="stringliteral">@&quot;service_result: %d&quot;</span>, service_result);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">// Something triggered the MVID Login process (in this case a button was touched)</span></div>
<div class="line">- (IBAction)startLogin:(<span class="keywordtype">id</span>)sender {</div>
<div class="line">    [device_security doLogin:@&quot;product.ios.ml.myapp&quot;</div>
<div class="line">        parentViewController:self];</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">@end</span></div>
</div><!-- fragment --></div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a8daf382c58870e969c70b1a257cbed82"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (enum) <a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82">ServiceResult</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Following values apply to the <a href="https://signon.mv-nordic.com/device-security/DeviceSecurity">DeviceSecurity</a> web service. In the descriptions below it is specified which methods in the <a class="el" href="interface_device_security.html">DeviceSecurity</a> class that can recieve which results directly.</p>
<p>When using <a class="el" href="interface_device_security.html#a59d9ba26ad151f17c38a4942cbde2381">doLogin:</a> both <a class="el" href="interface_device_security.html#a91af6c4bbe80e3c97b5ebf460f96bed4">registerDevice:</a> and <a class="el" href="interface_device_security.html#a195c84787c69210f0b76f791dd22d5b8">applicationLogin:</a> are candidates for being called, therefore all ServiceResult codes are bitwise candidates of the final login result, which is posted in the <a class="el" href="interface_device_security.html#MVIDLoginResponseReady">MVIDLoginResponseReady notification object</a> via the default notification center.</p>
<p>Read more about Apple's notification system here: <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043-SW1">Notification Programming Topics</a>. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a8daf382c58870e969c70b1a257cbed82a1f63f7246ff87307b7b4476fc8af9d01"></a>Success</em>&nbsp;</td><td class="fielddoc">
<p>Successful operation.</p>
<ul>
<li><a class="el" href="interface_device_security.html#a91af6c4bbe80e3c97b5ebf460f96bed4">registerDevice:</a><ul>
<li>registerDevice method has been succesfully queried.</li>
</ul>
</li>
<li><a class="el" href="interface_device_security.html#a195c84787c69210f0b76f791dd22d5b8">applicationLogin:</a><ul>
<li>The registered user has succesfully queried the applicationLogin method </li>
</ul>
</li>
</ul>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a8daf382c58870e969c70b1a257cbed82a06e6cb5e9544878ee1359a131f8dd5d6"></a>InvalidMVSessionID</em>&nbsp;</td><td class="fielddoc">
<p>Invalid MV Session ID.</p>
<ul>
<li><a class="el" href="interface_device_security.html#a91af6c4bbe80e3c97b5ebf460f96bed4">registerDevice:</a><ul>
<li>The mv_session_id passed to registerDevice is invalid. Obvious reason would be that it is too old and therefore timed out on the server side. </li>
</ul>
</li>
</ul>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a8daf382c58870e969c70b1a257cbed82a0cd3b6026f2ae9c070283ebb8b879e12"></a>AccessDenied</em>&nbsp;</td><td class="fielddoc">
<p>Application access denied.</p>
<ul>
<li><a class="el" href="interface_device_security.html#a195c84787c69210f0b76f791dd22d5b8">applicationLogin:</a><ul>
<li>The server was contacted and device hash is good, but the specific user mapped to the device does not have access to the application. </li>
</ul>
</li>
</ul>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a8daf382c58870e969c70b1a257cbed82afe220c677ce46739be269601a35a3f55"></a>ApplicationBorrowTimeExpired</em>&nbsp;</td><td class="fielddoc">
<p>Application borrow-time has expired.</p>
<ul>
<li><a class="el" href="interface_device_security.html#a195c84787c69210f0b76f791dd22d5b8">applicationLogin:</a><ul>
<li>Either the device or the MV-ID server is telling you that the time since last applicationLogin has expired the borrow-time allowed for the application. </li>
</ul>
</li>
</ul>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a8daf382c58870e969c70b1a257cbed82acd521f386dbb586a9b0dc64993e4697b"></a>DeviceBorrowTimeExpired</em>&nbsp;</td><td class="fielddoc">
<p>Device borrow-time has expired.</p>
<ul>
<li><a class="el" href="interface_device_security.html#a195c84787c69210f0b76f791dd22d5b8">applicationLogin:</a><ul>
<li>Either the device or the MV-ID server is telling you that the time since last applicationLogin has expired the borrow-time allowed for the device registration. This meens that the device is no longer mapped to a user on MV-ID and a login is requiered.</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>If device has no device hash registered this ServiceResult is also returned. </dd></dl>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a8daf382c58870e969c70b1a257cbed82afa277401a031d80c5f715e9fde8423f2"></a>ServiceFault</em>&nbsp;</td><td class="fielddoc">
<p>Fault occured while calling the Device Security service.</p>
<ul>
<li><a class="el" href="interface_device_security.html#a91af6c4bbe80e3c97b5ebf460f96bed4">registerDevice:</a></li>
<li><a class="el" href="interface_device_security.html#a195c84787c69210f0b76f791dd22d5b8">applicationLogin:</a><ul>
<li>Some fault occured during the invocation of a service method. Info about the fault is available in the response object itself. </li>
</ul>
</li>
</ul>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a8daf382c58870e969c70b1a257cbed82ad9ca97bd0e0d9a08e02d9cbabf79f5a6"></a>ServiceSuccess</em>&nbsp;</td><td class="fielddoc">
<p>ServiceSuccess meens that the a service method invocation succeeded with no faults. This does not necessarily meen that a device was registered succesfully or that access was granted to an application successfully. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a8daf382c58870e969c70b1a257cbed82a3988e5dfc5afac44615fbeaaf72bda83"></a>NetworkError</em>&nbsp;</td><td class="fielddoc">
<p>Network error occured.</p>
<ul>
<li><a class="el" href="interface_device_security.html#a91af6c4bbe80e3c97b5ebf460f96bed4">registerDevice:</a></li>
<li><a class="el" href="interface_device_security.html#a195c84787c69210f0b76f791dd22d5b8">applicationLogin:</a><ul>
<li>A network transport error has occured. Probably no link or other kind of network related problem like missing DNS service. Service requests timeout after 2 seconds, so connection problems should not "hang" the application. </li>
</ul>
</li>
</ul>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="a195c84787c69210f0b76f791dd22d5b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (int) applicationLogin: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>access_identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register the device for application usage. This method will only succeed on a properly registered device (see <a class="el" href="interface_device_security.html#a91af6c4bbe80e3c97b5ebf460f96bed4">registerDevice:</a>).</p>
<p>It should not be necessary to call this method from a third-party application since it is automatically invoked from DeviceSecurity:doLogin: if needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">access_identifier</td><td>The access_identifier identifying the application being started.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bitwise combination of <a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82">DeviceSecurity.ServiceResult</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a0db4f36507e9daa34755e3371c496f17"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) doLogin: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>access_identifier</em></td>
        </tr>
        <tr>
          <td class="paramkey">parentViewController:</td>
          <td></td>
          <td class="paramtype">(UIViewController *)&#160;</td>
          <td class="paramname"><em>vc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start the login process. This is a convenience method that calls <a class="el" href="interface_device_security.html#a59d9ba26ad151f17c38a4942cbde2381">doLogin</a> with alt_sub_view as nil. This means that the parentViewController's root view will be used as parent view for the login UI.</p>
<p>Example usage: </p>
<div class="fragment"><div class="line"><span class="comment">// In this example LoginViewController&#39;s view are placed on top</span></div>
<div class="line"><span class="comment">// of the parent view controller&#39;s root view.</span></div>
<div class="line">BOOL login_view_displayed =</div>
<div class="line">   [device_security doLogin:current_access_identifier</div>
<div class="line">       parentViewController:<span class="keyword">self</span>];</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">access_identifier</td><td>The access_identifier that needs to be checked. </td></tr>
    <tr><td class="paramname">parentViewController</td><td>The visible part of the login process is controlled by the LoginViewController which should be owned by a UIViewController in the applications domain. Therefore a parent UIViewController is mandatory in order to display the login UI. It is legal to pass nil if you just want to check if the user already has access and need to know that the login UI is not shown. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>(Has the login view been displayed) This value does <em>NOT</em> state if the login was a success or not, the actual result of the login is sent via the notificationCenter in the MVIDLoginResponseReady notification. The return value only says whether or not a login view has been displayed. For example:<ul>
<li>If for instance the user calls doLogin with a nil parentViewController, and the device is not registered, then doLogin cannot display the Login UI. This means that FALSE is returned and a MVIDLoginResponseReady notification can be posted right away telling the calling function that the login gave no access.</li>
<li>If a device is not registered (or has not been online for a while) and a parentViewController is passed then the LoginViewController is displayed and TRUE is returned. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a59d9ba26ad151f17c38a4942cbde2381"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) doLogin: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>access_identifier</em></td>
        </tr>
        <tr>
          <td class="paramkey">parentViewController:</td>
          <td></td>
          <td class="paramtype">(UIViewController *)&#160;</td>
          <td class="paramname"><em>vc</em></td>
        </tr>
        <tr>
          <td class="paramkey">altSubView:</td>
          <td></td>
          <td class="paramtype">(UIView *)&#160;</td>
          <td class="paramname"><em>alt_sub_view</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start the login process, communicating with MVID backend servers if online, else if any previous login has been performed and is still within the "borrow time" grace period, this will be used directly off the device. This means that a single login operation can be reused in offline mode some time.</p>
<dl class="section note"><dt>Note</dt><dd>To force device to re-login you must call resetDeviceRegistraion first and be sure to pass a parentViewController. To direct the login screen to a subview in your view controller use the altSubView parameter.</dd></dl>
<p>Example usage: </p>
<div class="fragment"><div class="line"><span class="comment">// In this example the LoginViewController&#39;s views are displayed in a</span></div>
<div class="line"><span class="comment">// overlay subview of my LoginController called myLoginView</span></div>
<div class="line">BOOL login_view_displayed = </div>
<div class="line">   [device_security doLogin:current_access_identifier</div>
<div class="line">       parentViewController:<span class="keyword">self</span></div>
<div class="line">                 altSubView:<span class="keyword">self</span>.myLoginView];</div>
<div class="line"><span class="keywordflow">if</span> (login_view_displayed) {</div>
<div class="line">   <span class="comment">// display and fade in my overlay view</span></div>
<div class="line">   <span class="keyword">self</span>.myLoginView.hidden = NO;</div>
<div class="line">   [UIView animateWithDuration:0.25</div>
<div class="line">                    animations:^{<span class="keyword">self</span>.myLoginView.alpha = 1.0;}];</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">access_identifier</td><td>The access_identifier that needs to be checked. </td></tr>
    <tr><td class="paramname">parentViewController</td><td>The visible part of the login process is controlled by the LoginViewController which should be owned by a UIViewController in the applications domain. Therefore a parent UIViewController is mandatory in order to display the login UI. It is legal to pass nil if you just want to check if the user already has access and need to know that the login UI is not shown. </td></tr>
    <tr><td class="paramname">altSubView</td><td>If nil is passed the then the LoginViewController's root UIView will be a sub view of the parentViewController's root UIView. By passing an alternate UIView you can control where the login UI should be displayed in your UIViewController's view hierarchi. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>(Has the login view been displayed) This value does <em>NOT</em> state if the login was a success or not, the actual result of the login is sent via the notificationCenter in the MVIDLoginResponseReady notification. The return value only says whether or not a login view has been displayed. For example:<ul>
<li>If for instance the user calls doLogin with a nil parentViewController, and the device is not registered, then doLogin cannot display the Login UI. This means that FALSE is returned and a MVIDLoginResponseReady notification can be posted right away telling the calling function that the login gave no access.</li>
<li>If a device is not registered (or has not been online for a while) and a parentViewController is passed then the LoginViewController is displayed and TRUE is returned. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="ad2fbfbb70427f27362d65c3d76e5d37d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) excludeLoginGroup: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>login_group</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Exclude a login group from the login UI.</p>
<p>Example usage: </p>
<div class="fragment"><div class="line"><span class="comment">// Exclude the school login group</span></div>
<div class="line">[device_security excludeLoginGroup:<span class="stringliteral">@&quot;company&quot;</span>];</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">login_group</td><td>The name of the login group. At the time of writing possible groups are: school, company and private </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abe74e76d8275892e7e2e4b32640ff16c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) includeAllLoginGroups </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Re-include all login groups. Use this if you have already excluded some login groups and want to include them all again without re-instantiating <a class="el" href="interface_device_security.html">DeviceSecurity</a> (which is discouraged)</p>
<p>Example usage: </p>
<div class="fragment"><div class="line"><span class="comment">// Include all login groups</span></div>
<div class="line">[device_security <a class="code" href="interface_device_security.html#abe74e76d8275892e7e2e4b32640ff16c">includeAllLoginGroups</a>];</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a91af6c4bbe80e3c97b5ebf460f96bed4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (int) registerDevice: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>mv_session_id</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register a device at MVID with a valid mv_session_id using <a href="https://signon.mv-nordic.com/device-security/DeviceSecurity">DeviceSecurity</a> web service.</p>
<p>It should not be necessary to call this method from a third-party application since it is automatically invoked from <a class="el" href="interface_device_security.html#a59d9ba26ad151f17c38a4942cbde2381">doLogin</a> if needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mv_session_id</td><td>The MVID session ID which should be associated with the device.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bitwise combination of <a class="el" href="interface_device_security.html#a8daf382c58870e969c70b1a257cbed82">DeviceSecurity.ServiceResult</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1d2a2cb88c5ff1522e0a0a9b26cba33c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) releaseApplicationUsage: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>access_identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release the device-side knowledge about whether or not access has been granted to an application. This will force the application to do a server-side check next time <a class="el" href="interface_device_security.html#a59d9ba26ad151f17c38a4942cbde2381">doLogin</a> is used.</p>
<p>This will not throw away the device registration, so re-login by user is not needed next time the device is online.</p>
<p>Example usage: </p>
<div class="fragment"><div class="line"><span class="comment">// Forget whether access is granted or not to MyApp</span></div>
<div class="line">[device_security releaseApplicationUsage:<span class="stringliteral">@&quot;products.ios.ml.myapp&quot;</span>]ÃŸ ;</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">access_identifier</td><td>The access_identifier to be released. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a44244e1af23d45fddc88bf3ecf56ccef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) releaseDeviceRegistration </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release the device-side knowledge about MVID within the app's sandbox forcing a new login from the user.</p>
<p>Calling this method will not affect other apps using MVIDDeviceConnector.</p>
<p>Example usage: </p>
<div class="fragment"><div class="line"><span class="comment">// Release device-side knowlegde of MVID</span></div>
<div class="line">[device_security <a class="code" href="interface_device_security.html#a44244e1af23d45fddc88bf3ecf56ccef">releaseDeviceRegistration</a>];</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a5585e02a0d79a1cbb095aba166bca179"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setLoginCenterDisplacement: </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>pixels</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Move the center point of the login UI n pixels to the left or right depending on the numeric sign.</p>
<p>Example usage: </p>
<div class="fragment"><div class="line"><span class="comment">// Horizontally displace the login 40 pixels to the left</span></div>
<div class="line">[device_security setLoginCenterDisplacement:-40];</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pixels</td><td>The amount of pixels to displace the center with. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>dist/lib/include/<a class="el" href="_device_security_8h_source.html">DeviceSecurity.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="interface_device_security.html">DeviceSecurity</a></li>
    <li class="footer">Generated on Thu Mar 27 2014 11:02:41 for MVIDDeciveConnector by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
